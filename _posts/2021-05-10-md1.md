---
layout: post
title: dubbo_概念
categories: [dubbo]
description: 介绍dubbo的一些概念
keywords: dubbo, rpc
---

 dubbo是一种基于Java的高性能RPC框架，最初由阿里巴巴开发，2018年2月进入Apache孵化器。

官方网站(本文第2,3部分摘自官网)：https://dubbo.apache.org/zh/ 

Apache Dubbo |ˈdʌbəʊ| 提供了六大核心能力：面向接口代理的高性能RPC调用，智能容错和负载均衡，服务自动注册和发现，高度可扩展能力，运行期流量调度，可视化的服务治理与运维。

## 1. RPC 介绍

 RPC（Remote Procedure Call），即远程过程调用。在不同系统间的通讯或者不同机器上的通讯，本地过程调用（LPC）无法满足相应的需求，所以得用到远程过程调用（RPC）。客户端通过参数传递的方式调用服务端上的方法，并得到返回结果。默认socket通信。

具体步骤为：

客户端将参数序列化后，通过网络传输给服务端，服务端反序列化后调用本地服务。将执行的结果序列化后又传给客户端，客户端反序列化后得到执行的结果。

## 2. 网站应用背景

网站应用的演进：

![dubbo-architecture-roadmap](/images/posts/dubbo/20210510_1.jpg)

- 单一应用架构：部署成本低，适用于网站流量小的情况。
- 垂直应用架构：单一应用拆成互不相干的几个应用，以提升效率。
- 分布式服务架构：当垂直应用越来越多，应用之间交互不可避免，将核心业务抽取出来，作为独立的服务，逐渐形成稳定的服务中心，使前端应用能更快速的响应多变的市场需求。
- 流动计算架构：当服务越来越多，容量的评估，小服务资源的浪费等问题逐渐显现，此时需增加一个调度中心基于访问压力实时管理集群容量，提高集群利用率。此时，用于提高机器利用率的资源调度和治理中心(SOA)是关键。



## 3. dubbo架构

dubbo架构：

![dubbo-architecture](/images/posts/dubbo/20210510_2.jpg)

- Provider：暴露服务的服务提供方
- Consumer：调用远程服务的服务消费方
- Registry：服务注册与发现的注册中心
- Monitor：服务监控中心
- Container：服务运行容器

调用关系说明：

0. 服务容器负责启动，加载，运行服务提供者。

1. 服务提供者在启动时，向注册中心注册自己提供的服务。
2. 服务消费者在启动时，向注册中心订阅自己所需的服务。
3. 注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。
4. 服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。
5. 服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。

